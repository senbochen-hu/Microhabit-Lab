# 《微习惯实验室》微信小程序
完整产品需求文档（PRD）+ UI/UX 说明—— 原生小程序 + 微信云开发

版本号：V1.3
日期：2025-12-26
技术方案：**原生微信小程序 + 微信云开发（CloudBase）**
目标：1 个月内完成「极简 MVP 版」开发、测试并上线内测。

---

## 一、项目概述

### 1.1 产品简介

- 产品名（暂定）：微习惯实验室
- 英文名：Micro Habits Lab
- 产品形态：微信小程序
- 技术栈：
  - 前端：原生微信小程序（WXML/WXSS/JS）
  - 后端：微信云开发（云函数 + 云数据库 + 云调用）

### 1.2 产品定位

基于“行为科学”的**微习惯养成工具**，通过：

- 微习惯（Micro Habits）：将行为拆解为 30 秒内可完成的动作；
- 触发器（Trigger）：将习惯绑定在固定情境，如“刷牙后、下班后、睡前”等；
- 21 天实验周期（Experiment）：每个习惯是一个 21 天的小实验，结束后复盘与调整；

帮助用户**低压力、长期地改善生活**，区别于传统只看“连续天数”的打卡类产品。

### 1.3 目标用户

1. 25–40 岁上班族：早睡、喝水、运动、少刷手机的需求很强；
2. 学生（高中/大学）：想养成学习、阅读、背单词习惯，常常三分钟热度；
3. 轻度健身/减脂人群：想从小动作开始运动，不愿一上来就高强度锻炼。

### 1.4 使用场景举例

- 早晨或睡前打开小程序，查看当天 2–5 个微习惯；
- 日常触发器发生时（刷牙、吃完饭、下班、上床前），做完动作后立即“打卡”；
- 每个 21 天周期结束时，系统弹出实验结果，帮助决策：继续 / 调整 / 暂停。

---

## 二、版本范围与目标

### 2.1 V1.3（MVP）业务目标

1. 微信登录 + 用户初始化；
2. 预设微习惯库（20 条左右）+ 自定义微习惯创建；
3. 今日习惯列表 + 打卡 + 21 天周期记录；
4. 基础数据统计 + 单习惯简易报告；
5. 会员（6.6 元/月）功能：
   - 免费用户：限制习惯数量、部分数据视图；
   - 会员用户：更多习惯 + 完整数据 + 报告。

### 2.2 不在本期范围

- 搭子/好友互相监督；
- 社交/社区内容；
- 复杂游戏化系统（徽章、等级树等）；
- 深度 AI 建议（V1 用模板/规则即可）。

---

## 三、功能需求

> 功能部分保持之前版本的结构，这里简述重点（给开发/AI），UI/UX 细节在后面专门章节详细补充。

### 3.1 用户系统

- 微信一键登录，使用云函数 `initUser` 获取/创建用户；
- 用户集合：`users`
  - 字段：`openid, register_time, last_login_time, member_status, member_expire_time` 等。

### 3.2 系统预设微习惯库（`habit_templates`）

- 字段：
  - `name, category(health/study/emotion/efficiency), default_trigger, description, is_active`；
- 用户可浏览 & 一键添加为自己的习惯。

### 3.3 用户习惯（`user_habits`）

- 字段：
  - `user_id(openid), template_id, name, trigger, target_times_per_day, start_date, cycle_days=21, status(in_progress/finished)`；
- 免费用户进行中习惯上限：3 个；会员上限：20（可配置）。

### 3.4 打卡记录（`habit_logs`）

- 字段：
  - `user_id, user_habit_id, date(YYYY-MM-DD), times`；
- `times >= 1` 视为当天已完成。

### 3.5 今日习惯页（Home）

- 云函数 `getTodayHabits` 返回今日所有进行中习惯 + 当日打卡次数；
- 支持一键打卡（云函数 `logHabit`）。

### 3.6 21 天实验周期与复盘

- 定义：`start_date` ~ `start_date + 20 天`；
- 周期结束判断：`today > end_date` 且 `status=in_progress`；
- 前端弹出“实验结束”弹窗，提供：
  - 继续新一轮；
  - 改小一点；
  - 暂停。

### 3.7 数据与报告（Stats）

- 总览：进行中习惯数、已完成实验数、最长连续坚持天数；
- 单习惯：最近 7/21 天完成情况，简单完成率 + 模板化建议。

### 3.8 会员（6.6 元/月）

- 集成微信支付，成功后更新 `users.member_status=1`、`member_expire_time`；
- 限制逻辑：创建习惯时 & 查看完整数据时判断。

---

## 四、UI/UX 设计规范（详细补充）

本章节是对 UI/UX 的完整补充，方便你直接给设计/AI 设计工具使用。

### 4.1 品牌调性 & 视觉风格

**设计关键词：**

- 微小、温和、治愈、轻盈、无压力、科学感一点点。

**颜色体系（建议）：**

- 主色（Primary）：
  - 柔和绿：`#4CAF93` 或 柔和蓝绿：`#4CB8A5`
  - 用途：主按钮、关键高亮。
- 辅助色（Secondary）：
  - 柔和蓝：`#4C9BFF`（用于次要按钮/标签）；
- 背景色（Background）：
  - 页面背景：`#F7F8FA` 或 `#F5F5F7`（浅灰偏暖）；
  - 卡片背景：纯白 `#FFFFFF`。
- 字体颜色（Typography）：
  - 主标题：`#111827`（近黑）；
  - 正文：`#4B5563`；
  - 次要 / 引导文案：`#9CA3AF`。

**圆角与阴影：**

- 卡片圆角：`12px`；
- 按钮圆角：`999px`（胶囊状）；
- 阴影：弱阴影或简单边框替代，避免太厚重：
  - 如 `box-shadow: 0 4px 12px rgba(15,23,42,0.06)`。

**字体层级：**

- H1（页面大标题）：18–20px，加粗；
- H2（卡片标题）：16px，中/半粗；
- 正文：14px；
- 标签/辅助说明：12px。

**整体体验：**

- 页面对比不要太高，尽量柔和；
- 交互反馈简单自然，不要“游戏风”。

---

### 4.2 通用交互原则

1. **操作可逆/容错**
   - 删除/暂停习惯前弹出确认；
   - 不做“硬惩罚”（如打断连续天数导致强烈负反馈）；
2. **引导微小行动**
   - 所有文案都强调“小一步”、“30 秒内完成”等；
3. **减少选择成本**
   - 表单尽量少字段，提供推荐/默认值；
4. **即时反馈**
   - 打卡、创建习惯后，使用 toast + 小动画反馈；
5. **节制通知**
   - V1 不做频繁推送，避免打扰。

---

### 4.3 信息架构 & 导航

**底部 Tab：**

1. 今日习惯（Home）
2. 习惯库（Habits）
3. 数据 & 我（Stats / Me）

图标建议：

- 今日习惯：日历/打勾图标；
- 习惯库：书本/列表图标；
- 数据 & 我：图表/用户图标。

---

### 4.4 页面 UI/UX 详细说明

#### 4.4.1 今日习惯页（Home）

**结构：**

1. 顶部区域
   - 左对齐日期：`2025-12-26 周五`
   - 下方一行鼓励语（从文案池随机）
     - 示例文案池：
       - “今天，只需要完成这些小小的动作，就足够了。”
       - “小小的 30 秒，也在一点点改变未来。”
       - “不求完美，坚持一点点就好。”
   - 布局：
     - 日期字体稍大，鼓励语字体稍小、灰色。

2. 今日习惯列表（Card List）
   - 每个习惯卡片包含：
     - 标题（习惯名称）：
       - 字体 16px，单行展示，超出省略号；
     - 触发器标签：
       - 小圆角标签，左侧或右侧，内容如【触发：刷牙后】；
       - 背景可用浅主色：`rgba(76, 184, 165, 0.08)`，文字主色/深绿；
     - 今日进度：
       - 小字：`今日进度 0/1` 或 `今日进度 1/2`；
     - 打卡按钮：
       - 右侧或卡片底部：
         - 圆形按钮（48×48 px），图标为“对勾”；
         - 背景主色，图标白色；
   - 已完成状态：
     - 整个卡片背景稍变淡（如 `#F3F4F6`）；
     - 标题左侧出现实心“对勾”图标；
     - 打卡按钮变灰或变为“已完成”字样（不可点击）。

3. 底部新建按钮
   - 文案：`+ 新建微习惯`；
   - 形式：
     - 底部全宽胶囊按钮，或右下方悬浮 + 按钮；
   - 颜色：主色背景 + 白字。

**交互细节：**

- 下拉刷新：
  - 重新获取今日习惯列表；
- 打卡点击：
  - 按钮有缩放 + 色块波纹动效（简单版本即可）；
  - 顶部可弹出轻微 toast：“已记录，做得很好！”；
- 空状态（无习惯时）：
  - 中央插画/图标 + 文案：
    - “从一个小小的习惯开始吧”
  - 按钮：
    - “去习惯库看看” / “新建微习惯”。

---

#### 4.4.2 新建微习惯页（New Habit）

**布局：**

1. 顶部标题：`新建微习惯`
   - 提示文字（小字）：
     - “写下一个 30 秒内能完成的小动作。”

2. 表单区域：

- 字段一：习惯名称（行为）
  - 输入框占位符：
    - “例：刷牙后喝一口水 / 睡前写 1 句话日记”
  - 辅助提示（小字灰色）：
    - “不要写成‘每天跑步 5 公里’，先从‘穿上跑鞋走出门 100 米’开始。”

- 字段二：触发器
  - 标题：`选择一个触发场景`
  - 使用按钮组（单选）：
    - [刷牙后] [上班路上] [午饭后] [下班到家后] [睡前] [其他]
  - 若选择「其他」：
    - 出现一个小输入框，供用户自定义（最长 12 字）。

- 字段三：执行频次
  - 标题：`每天执行几次？`
  - 单选按钮：
    - [每天 1 次（推荐）]
    - [每天 2 次]

3. 底部按钮：

- 左边次按钮：`取消`（返回上一页）；
- 右边主按钮：`保存习惯`。

**交互与校验：**

- 必填：习惯名称 + 触发器；
- 保存前校验：
  - 名称是否为空；
  - 若是“其他”触发器，自定义文本不能为空；
- 若保存时触发「免费用户超过 3 个习惯限制」：
  - 弹出会员引导弹窗（见会员 UI）。

---

#### 4.4.3 习惯库 & 我的习惯页（Habits）

**顶部切换控件：**

- 两个 Tab：
  - [习惯库] [我的习惯]
- 使用分段控制器风格（Segmented Control），选中态底部有主色下划线或背景块。

##### A. 习惯库（预设模板列表）

**过滤区域：**

- 水平滚动标签：
  - [全部] [健康] [学习] [情绪] [效率]
- 选中标签高亮（主色），未选中浅灰。

**列表项卡片：**

- 标题（习惯名称）；
- 触发器标签：【触发：刷牙后】；
- 一句话说明（灰色小字，最多两行）；
- 右侧/底部 `+ 添加` 按钮（小号主色描边按钮）。

**交互：**

- 点击卡片任意区域仍可触发“添加”弹窗；
- 添加弹窗：
  - 展示：习惯名称、触发器；
  - 简要说明一行；
  - 频次选择（1 / 2 次，默认 1 次）；
  - 底部“确认添加”/“取消”。

##### B. 我的习惯列表

**列表展示：**

- 每行：
  - 习惯名称；
  - 状态标签：
    - 进行中：绿色小标签【进行中】；
    - 已结束：灰色小标签【已结束】；
  - 当前周期进度（辅助文字）：
    - 如：“第 5 / 21 天”。

**交互：**

- 点击一条：跳转到“习惯详情页”；
- 右侧“更多”图标（`...`）：
  - 弹出操作菜单：
    - 暂停/结束
    - 编辑（仅名称和触发器）

---

#### 4.4.4 习惯详情页（Habit Detail）

**结构：**

1. 顶部信息卡片
   - 习惯名称（大号字）；
   - 触发器标签；
   - 状态文本（进行中 / 已结束）；
   - 当前或最近一个 21 天周期：`2025-12-01 ~ 2025-12-21`。

2. 中部数据可视化

- 简易 21 天打卡图：
  - 3 行 × 7 列；
  - 每个格子 16×16 px 左右，间隔 4px；
  - 完成：填充主色或深色；
  - 未完成：浅灰边框或空心；
- 免费用户：
  - 仅显示最近 7 天（第一行），其余两行蒙版遮罩 + 文案：
    - “开通会员解锁完整 21 天轨迹”。

3. 文本报告模块

- 完成情况：
  - `本轮实验完成：X / 21 天，完成率 Y%`；
- 模板建议（1–3 行）：
  - 根据完成率区间动态生成；
- 会员用户多一个“我的备注”输入区：
  - 小文本框，可写 50–100 字自我反思；
  - 保存后显示为静态文本。

4. 底部操作按钮

- 左：次按钮 `结束本轮实验`；
- 右：主按钮 `调整这个习惯`（跳转到编辑页）。

---

#### 4.4.5 数据 & 我（Stats / Me）

**上半部分：数据总览卡片**

- 使用横向排列的 3 个小卡片：

  1. 进行中习惯数：
     - 标题：`进行中`
     - 数字：`3`
  2. 已完成实验：
     - 标题：`完成实验`
     - 数字：`2`
  3. 最长连续天数：
     - 标题：`最长坚持`
     - 数字：`15 天`

- 卡片采用统一风格：浅色背景 + 大号数字 + 小标题。

**中部：习惯列表 + 7 天小图**

- 每条展示：
  - 习惯名称；
  - 最近 7 天完成小点图（7 个圆点）：
    - 已完成日：主色实心；
    - 未完成：空心灰圆；
- 点击一条：跳转到“习惯详情”。

**下部：会员模块**

- 非会员视图：

  - 标题：`解锁微习惯会员`；
  - 副文案：`系统管理你的行为实验，记录完整 21 天轨迹`；
  - 权益列表（带对勾）：
    - 无限创建习惯（或更高上限）；
    - 解锁完整微习惯库；
    - 查看完整 21 天图表与详细建议；
  - 按钮：`6.6 元/月 开通会员`（主色胶囊按钮）。

- 会员视图：

  - 显示：`当前为会员 · 有效期至 202X-XX-XX`；
  - 文案：`感谢支持，一起坚持小小的改变。`

**底部：辅助入口**

- 小文字链接：
  - 设置
  - 隐私政策
  - 关于我们

---

### 4.5 状态 & 反馈设计

#### 4.5.1 空状态设计

- 今日习惯无数据：
  - 插画 + 文本：
    - “今天还没有要做的微习惯”
    - “从一个小动作开始吧”
  - 按钮：
    - `去习惯库看看`（主按钮）
- 我的习惯无数据：
  - 文案：“你还没有创建任何习惯”。

#### 4.5.2 加载与错误

- 数据加载中：
  - 使用轻量 loading 动画（小圆点转圈）；
- 加载失败：
  - 文案：“加载失败，轻触重试”；
  - 提供刷新按钮/区域点击重试。

#### 4.5.3 Toast & 弹窗文案示例

- 打卡成功：
  - “已记录，做得很好。”
- 新建成功：
  - “新习惯已加入今日列表。”
- 超过免费习惯上限：
  - 标题：`已经很棒了！`
  - 内容：
    - “一次想改太多习惯，大多数人会失败。免费版最多同时进行 3 个习惯。”
    - “如果你已经适应微习惯方式，可以开通会员，系统管理更多小实验。”

---

### 4.6 动效与微交互建议（可选，V1 可简化）

- 打卡按钮按下时的轻微缩放（90%→100%）；
- 完成一个习惯当日目标时，小对勾从按钮飞向卡片标题；
- 进入“数据 & 我”页面时，数字卡片可以有一个从 0 数到目标值的简短动画（可选）。

---

## 五、云开发技术设计概要（简要）

> 与之前版本保持一致，这里只点关键，详细见前一版 PRD。

- 集合：
  - `users`, `habit_templates`, `user_habits`, `habit_logs`；
- 关键云函数：
  - `initUser`, `getTodayHabits`, `createHabit`, `logHabit`, `getStats`, `membership`；
- 调用方式：
  - 前端使用 `wx.cloud.callFunction`；
  - 在云函数中用 `cloud.getWXContext()` 获取 `OPENID`。

---

## 六、项目节奏 & 与 AI 工具协作方式

（同前版本，不再展开）

- 建议顺序：
  1. 按本文件先让 AI 生成页面骨架（WXML/WXSS/JS）；
  2. 再让 AI 生成云函数骨架（Node.js）；
  3. 然后对接接口、调试、调整 UI 细节。

---

（V1.3 需求 + UI/UX 完整文档完）
