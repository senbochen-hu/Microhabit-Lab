# 🚀 快速开始 - 5分钟启动项目

## ⚡ 快速部署步骤

### 1️⃣ 打开项目 (30秒)

1. 启动 **微信开发者工具**
2. 点击"导入项目"
3. 选择目录: `d:\AABBCC`
4. AppID 已配置: `wxd7b17df348c02834`
5. 点击"导入"

### 2️⃣ 初始化云开发 (1分钟)

**如果已有云环境**:
- 确认环境ID: `cloud1-0g29mlsv3d4ca637`
- 跳到步骤3

**如果没有云环境**:
1. 点击工具栏"云开发"按钮
2. 开通云开发服务
3. 创建环境(选择基础版)
4. 记下环境ID
5. 更新 `miniprogram/app.js` 第6行的环境ID

### 3️⃣ 创建数据库集合 (1分钟)

在云开发控制台 → 数据库中,点击"+"创建以下4个集合:

| 集合名 | 说明 |
|--------|------|
| `users` | 用户表 |
| `habit_templates` | 习惯模板表 |
| `user_habits` | 用户习惯表 |
| `habit_logs` | 打卡记录表 |

**权限设置**: 全部选择"仅创建者可读写"

### 4️⃣ 部署云函数 (2分钟)

在开发者工具左侧 `cloudfunctions` 目录下:

```
右键点击每个文件夹 → "上传并部署:云端安装依赖"
```

需要部署的云函数(10个):
- ✅ initUser
- ✅ getTodayHabits
- ✅ createHabit
- ✅ logHabit
- ✅ getStats
- ✅ getHabitDetail
- ✅ updateHabitStatus
- ✅ createPayment
- ✅ activateMembership
- ✅ initTemplates (导入数据后可删除)

> 如需支付功能: 在云开发控制台绑定商户号/密钥, 设置环境变量 `SUB_MCH_ID` (子商户号), 部署 `createPayment` 与 `activateMembership` 后再在前端发起支付。未配置商户号时, 会员页会提示“待配置商户”, 按钮禁用。

### 5️⃣ 导入习惯模板 (30秒)

1. 在云开发控制台 → 云函数
2. 找到 `initTemplates`
3. 点击"测试"按钮
4. 不填参数,直接点击"调用"
5. 看到 `"code": 0` 即成功导入20条模板
6. (可选) 删除 `initTemplates` 云函数

### 6️⃣ 开始测试! 🎉

点击开发者工具的"编译"按钮,开始体验!

---

## 📱 功能测试流程

### 首次使用流程

1. **查看空状态**
   - 打开小程序
   - 首页显示"今天还没有要做的微习惯"

2. **浏览习惯库**
   - 点击"去习惯库看看"
   - 查看20条预设模板
   - 可按分类筛选

3. **创建第一个习惯**
   - 点击任意模板的"添加"按钮
   - 或点击首页右下角"+"按钮自定义
   - 填写习惯信息
   - 点击"创建习惯"

4. **完成首次打卡**
   - 返回首页
   - 看到新创建的习惯卡片
   - 点击右侧打卡按钮
   - 看到成功提示和动效

5. **查看统计数据**
   - 切换到"数据"Tab
   - 查看进行中习惯数量

---

## 🐛 常见问题速查

### ❌ 云函数调用失败

**问题**: 提示"云函数不存在"

**解决**:
```bash
1. 确认云函数已上传(右键检查)
2. 在云开发控制台检查函数列表
3. 重新上传并部署
```

### ❌ 习惯库是空的

**问题**: 习惯库页面没有模板

**解决**:
```bash
1. 确认 habit_templates 集合已创建
2. 执行 initTemplates 云函数
3. 在数据库中检查是否有20条记录
```

### ❌ 打卡没反应

**问题**: 点击打卡按钮无响应

**解决**:
```bash
1. 打开调试器查看报错信息
2. 确认 logHabit 云函数已部署
3. 检查 habit_logs 集合权限
```

### ❌ 数据库权限错误

**问题**: 提示"permission denied"

**解决**:
```bash
1. 进入云开发控制台 → 数据库
2. 点击集合名 → 权限设置
3. 选择"仅创建者可读写"
4. 保存并重试
```

---

## 📊 快速验证清单

部署完成后,用这个清单验证:

- [ ] 小程序能正常打开
- [ ] 首页显示日期和鼓励语
- [ ] 能进入习惯库并看到20条模板
- [ ] 能成功创建一个习惯
- [ ] 能正常打卡
- [ ] 打卡后有成功提示
- [ ] 数据页显示统计信息
- [ ] 我的习惯列表显示已创建的习惯

全部打勾 = 部署成功! ✅

---

## 🎯 下一步

### 本地开发
- 参考 `README.md` 了解项目结构
- 参考 `DATABASE_DESIGN.md` 了解数据库设计

### 功能完善
- 完善习惯详情页
- 实现会员支付功能
- 优化数据统计

### 准备上线
- 参考 `DEPLOYMENT.md` 完整部署指南
- 真机测试
- 提交审核

---

## 💡 提示

1. **第一次打开可能较慢** - 云函数冷启动需要几秒
2. **使用体验版测试** - 上传代码后生成二维码给朋友测试
3. **查看云函数日志** - 遇到问题先看日志,大部分问题都能找到原因
4. **数据库索引** - 用户量大后记得创建索引提升性能

---

**快速入门完成!** 🎊

有问题查看 `DEPLOYMENT.md` 详细指南,或查看微信开发者文档。
